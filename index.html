    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>H·ªá th·ªëng d·ª± ƒëo√°n s·∫£n l∆∞·ª£ng v√† gi·ªëng ph√π h·ª£p</title>
        <style>
    /* Bi·∫øn g·ªëc cho ch·ªß ƒë·ªÅ v√† t√°i s·ª≠ d·ª•ng */
    :root {
        --border-radius: 1.2rem; /* B√°n k√≠nh bo g√≥c */
        --transition-duration: 0.3s; /* Th·ªùi gian chuy·ªÉn ƒë·ªïi */
        --max-container-width: 1280px; /* Chi·ªÅu r·ªông t·ªëi ƒëa c·ªßa container */
        --font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; /* Ph√¥ng ch·ªØ */
        --shadow-color: rgba(0, 0, 0, 0.12); /* M√†u b√≥ng */
        --glass-bg: rgba(255, 255, 255, 0.15); /* N·ªÅn k√≠nh m·ªù */
        --glass-blur: blur(12px); /* ƒê·ªô m·ªù k√≠nh */
        --temperature-color: #e63946; /* M√†u nhi·ªát ƒë·ªô */
        --humidity-color: #1d84c6; /* M√†u ƒë·ªô ·∫©m */
        --precipitation-color: #0984e3; /* M√†u l∆∞·ª£ng m∆∞a */
        --precipitation-probability-color: #00a8cc; /* M√†u kh·∫£ nƒÉng m∆∞a */
        --sunshine-color: #f4a261; /* M√†u n·∫Øng */
        --menu-width: 250px; /* Chi·ªÅu r·ªông menu */
        --menu-trigger-width: 20px; /* Chi·ªÅu r·ªông n√∫t k√≠ch ho·∫°t menu */
    }

    /* Ch·ªß ƒë·ªÅ s√°ng (m·∫∑c ƒë·ªãnh) */
    :root {
        --primary-gradient-start: #a8e6cf; /* M√†u b·∫Øt ƒë·∫ßu gradient ch√≠nh */
        --primary-gradient-end: #dcedc8; /* M√†u k·∫øt th√∫c gradient ch√≠nh */
        --box-gradient-start: #a8e6cf; /* M√†u b·∫Øt ƒë·∫ßu gradient box */
        --box-gradient-end: #dcedc8; /* M√†u k·∫øt th√∫c gradient box */
        --calendar-gradient-start: #81d4fa; /* M√†u b·∫Øt ƒë·∫ßu gradient l·ªãch */
        --calendar-gradient-end: #e0f7fa; /* M√†u k·∫øt th√∫c gradient l·ªãch */
        --text-dark: #1a2632; /* M√†u ch·ªØ t·ªëi */
        --text-light: #f5f6f5; /* M√†u ch·ªØ s√°ng */
        --box-bg: rgba(255, 255, 255, 0.85); /* N·ªÅn box */
        --calendar-bg: #fff; /* N·ªÅn l·ªãch */
        --calendar-border: #e74c3c; /* Vi·ªÅn l·ªãch */
        --calendar-shadow: rgba(0, 0, 0, 0.15); /* B√≥ng l·ªãch */
        --menu-bg: rgba(255, 255, 255, 0.9); /* N·ªÅn menu */
        --menu-hover-bg: rgba(230, 230, 230, 0.8); /* N·ªÅn menu khi hover */
        --menu-text: #1a2632; /* M√†u ch·ªØ menu */
    }

    /* H·ªó tr·ª£ ch·ªß ƒë·ªÅ t·ªëi */
    @media (prefers-color-scheme: dark) {
        :root {
            --primary-gradient-start: #2d6a4f; /* M√†u b·∫Øt ƒë·∫ßu gradient ch√≠nh (t·ªëi) */
            --primary-gradient-end: #4a7043; /* M√†u k·∫øt th√∫c gradient ch√≠nh (t·ªëi) */
            --box-gradient-start: #2d6a4f; /* M√†u b·∫Øt ƒë·∫ßu gradient box (t·ªëi) */
            --box-gradient-end: #4a7043; /* M√†u k·∫øt th√∫c gradient box (t·ªëi) */
            --calendar-gradient-start: #3498db; /* M√†u b·∫Øt ƒë·∫ßu gradient l·ªãch (t·ªëi) */
            --calendar-gradient-end: #34495e; /* M√†u k·∫øt th√∫c gradient l·ªãch (t·ªëi) */
            --text-dark: #e6ecef; /* M√†u ch·ªØ t·ªëi (t·ªëi) */
            --text-light: #2c3e50; /* M√†u ch·ªØ s√°ng (t·ªëi) */
            --box-bg: rgba(40, 54, 70, 0.9); /* N·ªÅn box (t·ªëi) */
            --glass-bg: rgba(40, 54, 70, 0.25); /* N·ªÅn k√≠nh m·ªù (t·ªëi) */
            --calendar-bg: #34495e; /* N·ªÅn l·ªãch (t·ªëi) */
            --calendar-border: #c0392b; /* Vi·ªÅn l·ªãch (t·ªëi) */
            --calendar-shadow: rgba(0, 0, 0, 0.4); /* B√≥ng l·ªãch (t·ªëi) */
            --menu-bg: rgba(40, 54, 70, 0.9); /* N·ªÅn menu (t·ªëi) */
            --menu-hover-bg: rgba(60, 80, 100, 0.8); /* N·ªÅn menu khi hover (t·ªëi) */
            --menu-text: #e6ecef; /* M√†u ch·ªØ menu (t·ªëi) */
        }
    }

    /* Reset v√† ki·ªÉu c∆° b·∫£n */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    body {
        font-family: var(--font-family); /* Ph√¥ng ch·ªØ m·∫∑c ƒë·ªãnh */
        min-height: 100vh; /* Chi·ªÅu cao t·ªëi thi·ªÉu to√†n m√†n h√¨nh */
        background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end)); /* N·ªÅn gradient */
        padding: clamp(1.5rem, 5vw, 2.5rem); /* Kho·∫£ng c√°ch l·ªÅ */
        overflow-x: hidden; /* NgƒÉn cu·ªôn ngang */
        position: relative;
    }

    /* Ki·ªÉu cho menu thanh b√™n */
    .menu-container {
        position: fixed;
        top: 0;
        left: calc(-1 * var(--menu-width)); /* ·∫®n menu b√™n tr√°i */
        width: var(--menu-width); /* Chi·ªÅu r·ªông menu */
        height: 100%;
        background: var(--menu-bg); /* N·ªÅn menu */
        backdrop-filter: var(--glass-blur); /* Hi·ªáu ·ª©ng k√≠nh m·ªù */
        border-right: 2px solid rgba(255, 255, 255, 0.4); /* Vi·ªÅn ph·∫£i */
        box-shadow: 0 8px 20px var(--shadow-color); /* B√≥ng menu */
        transition: transform var(--transition-duration) ease; /* Hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªïi */
        z-index: 1000;
    }

    .menu-container:hover,
    .menu-trigger:hover ~ .menu-container {
        transform: translateX(var(--menu-width)); /* Hi·ªÉn th·ªã menu khi hover */
    }

    .menu-trigger {
        position: fixed;
        top: 0;
        left: 0;
        width: var(--menu-trigger-width); /* Chi·ªÅu r·ªông n√∫t k√≠ch ho·∫°t */
        height: 100%;
        background: rgba(0, 0, 0, 0.1); /* N·ªÅn n√∫t k√≠ch ho·∫°t */
        cursor: pointer;
        z-index: 1100;
    }

    .menu {
        padding: 2rem 1rem; /* Kho·∫£ng c√°ch trong menu */
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Kho·∫£ng c√°ch gi·ªØa c√°c m·ª•c menu */
    }

    .menu-item {
        padding: 1rem;
        color: var(--menu-text); /* M√†u ch·ªØ menu */
        font-size: clamp(1rem, 2vw, 1.2rem); /* K√≠ch th∆∞·ªõc ch·ªØ */
        font-weight: 500;
        border-radius: 0.6rem; /* Bo g√≥c */
        transition: background var(--transition-duration) ease; /* Hi·ªáu ·ª©ng hover */
        cursor: pointer;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem; /* Kho·∫£ng c√°ch gi·ªØa bi·ªÉu t∆∞·ª£ng v√† ch·ªØ */
    }

    .menu-item:hover {
        background: var(--menu-hover-bg); /* N·ªÅn khi hover */
    }

    .menu-item i {
        font-size: 1.2rem; /* K√≠ch th∆∞·ªõc bi·ªÉu t∆∞·ª£ng */
    }

    /* Container ch√≠nh ƒë·ªÉ chia b·ªë c·ª•c gi·ªØa c√°c box v√† l·ªãch */
    .body-container {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem; /* Kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn */
        max-width: var(--max-container-width); /* Chi·ªÅu r·ªông t·ªëi ƒëa */
        margin: 0 auto;
        align-items: flex-start;
        margin-left: calc(var(--menu-trigger-width) + 1rem); /* Kho·∫£ng c√°ch l·ªÅ tr√°i */
    }

    /* Ph·∫ßn b√™n ph·∫£i (L·ªãch + D·ª± b√°o th·ªùi ti·∫øt) */
    .right-side {
        display: flex;
        flex-direction: column;
        gap: 2rem; /* Kho·∫£ng c√°ch gi·ªØa l·ªãch v√† d·ª± b√°o */
        width: 450px; /* TƒÉng chi·ªÅu r·ªông ƒë·ªÉ ch·ª©a n·ªôi dung */
        max-width: 100%;
    }

    /* Ki·ªÉu cho ti√™u ƒë·ªÅ */
    .title {
        color: red; /* M√†u ch·ªØ ti√™u ƒë·ªÅ */
        font-size: clamp(2rem, 6vw, 3.2rem); /* K√≠ch th∆∞·ªõc ch·ªØ */
        font-weight: 700;
        text-align: center;
        margin: 2.5rem 0;
        padding: 1.5rem 3rem;
        background: linear-gradient(135deg, var(--glass-bg), rgba(255, 255, 255, 0.3)); /* N·ªÅn k√≠nh m·ªù */
        backdrop-filter: var(--glass-blur); /* Hi·ªáu ·ª©ng k√≠nh m·ªù */
        border-radius: var(--border-radius); /* Bo g√≥c */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* B√≥ng */
        border: 2px solid rgba(255, 255, 255, 0.4); /* Vi·ªÅn */
        animation: fadeInDown 0.8s ease-out, glow 2s ease-in-out infinite alternate; /* Hi·ªáu ·ª©ng */
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.25); /* B√≥ng ch·ªØ */
        letter-spacing: 1px;
    }

    /* Hi·ªáu ·ª©ng ph√°t s√°ng */
    @keyframes glow {
        from {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2), 0 0 20px rgba(255, 255, 255, 0.2);
        }
        to {
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 255, 255, 0.4);
        }
    }

    .box-container {
        flex: 1;
        min-width: 0;
        display: flex;
        flex-direction: column;
        gap: 2rem; /* Kho·∫£ng c√°ch gi·ªØa c√°c h√†ng */
        background-image: url("img/nendata.jpg"); /* H√¨nh n·ªÅn */
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        padding: 1rem;
        border-radius: var(--border-radius); /* Bo g√≥c */
        box-shadow: 0 8px 20px var(--shadow-color); /* B√≥ng */
    }

    /* H√†ng tr√™n: 2 box */
    .top-row {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* 2 c·ªôt */
        gap: 2rem;
    }

    /* H√†ng d∆∞·ªõi: 3 box */
    .bottom-row {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* 3 c·ªôt */
        gap: 2rem;
    }

    /* Ki·ªÉu cho c√°c box */
    .box {
        background: var(--box-bg); /* N·ªÅn box */
        padding: 2rem;
        border-radius: var(--border-radius); /* Bo g√≥c */
        box-shadow: 0 8px 25px var(--shadow-color); /* B√≥ng */
        text-align: center;
        transition: transform var(--transition-duration) ease, box-shadow var(--transition-duration) ease; /* Hi·ªáu ·ª©ng hover */
        animation: fadeInUp 0.6s ease-out forwards; /* Hi·ªáu ·ª©ng xu·∫•t hi·ªán */
        animation-delay: calc(var(--delay) * 0.15s);
        will-change: transform, box-shadow;
        min-width: 0;
    }

    .box:nth-child(1) { --delay: 1; }
    .box:nth-child(2) { --delay: 2; }
    .box:nth-child(3) { --delay: 3; }
    .box:nth-child(4) { --delay: 4; }
    .box:nth-child(5) { --delay: 5; }

    .box:hover {
        transform: translateY(-0.6rem); /* Di chuy·ªÉn l√™n khi hover */
        box-shadow: 0 14px 35px var(--shadow-color); /* B√≥ng l·ªõn h∆°n khi hover */
    }

    /* Ki·ªÉu ch·ªØ cho box */
    .box h1 {
        color: var(--text-dark); /* M√†u ch·ªØ ti√™u ƒë·ªÅ */
        font-size: clamp(1.3rem, 3vw, 1.6rem); /* K√≠ch th∆∞·ªõc ch·ªØ */
        font-weight: 500;
        margin-bottom: 1.2rem;
        letter-spacing: 0.6px;
    }

    .data {
        font-size: clamp(1rem, 2.5vw, 1.3rem); /* K√≠ch th∆∞·ªõc ch·ªØ d·ªØ li·ªáu */
        color: #7f8c8d; /* M√†u ch·ªØ */
        font-weight: 400;
    }

    .value {
        font-size: clamp(2rem, 4.5vw, 2.8rem); /* K√≠ch th∆∞·ªõc ch·ªØ gi√° tr·ªã */
        font-weight: 700;
        display: block;
        margin: 0.6rem 0;
        transition: color var(--transition-duration) ease; /* Hi·ªáu ·ª©ng chuy·ªÉn m√†u */
    }

    #temperature { color: var(--temperature-color); }
    #humidity { color: var(--humidity-color); }
    #soil_moisture { color: #2ca02c; }
    #nh3 { color: #7209b7; }
    #precipitation { color: var(--precipitation-color); }

    /* Container l·ªãch v·ªõi n·ªÅn */
    .calendar-container {
        background: linear-gradient(135deg, var(--calendar-gradient-start), var(--calendar-gradient-end)); /* N·ªÅn gradient l·ªãch */
        border-radius: var(--border-radius); /* Bo g√≥c */
        box-shadow: 0 8px 20px var(--calendar-shadow); /* B√≥ng */
        padding: 1.5rem;
        border-top: 8px solid var(--calendar-border); /* Vi·ªÅn tr√™n */
        animation: fadeInRight 0.8s ease-out; /* Hi·ªáu ·ª©ng xu·∫•t hi·ªán */
    }

    /* Hi·ªáu ·ª©ng x√© gi·∫•y */
    .calendar-container::before {
        content: '';
        position: absolute;
        top: -8px;
        left: 0;
        right: 0;
        height: 8px;
        background: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 10px,
            rgba(0, 0, 0, 0.1) 10px,
            rgba(0, 0, 0, 0.1) 20px
        );
    }

    /* Ki·ªÉu l·ªãch */
    .calendar {
        text-align: center;
    }

    .calendar-month-year {
        font-size: clamp(1.1rem, 2vw, 1.3rem); /* K√≠ch th∆∞·ªõc ch·ªØ th√°ng-nƒÉm */
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
        text-transform: uppercase;
    }

    .calendar-day {
        font-size: clamp(2.5rem, 5vw, 3.5rem); /* K√≠ch th∆∞·ªõc ch·ªØ ng√†y */
        font-weight: 700;
        color: var(--calendar-border);
        margin: 0.5rem 0;
        line-height: 1;
    }

    .calendar-weekday {
        font-size: clamp(1rem, 1.8vw, 1.2rem); /* K√≠ch th∆∞·ªõc ch·ªØ th·ª© */
        font-weight: 500;
        color: #7f8c8d;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
    }

    .calendar-time {
        font-size: clamp(1rem, 1.8vw, 1.2rem); /* K√≠ch th∆∞·ªõc ch·ªØ th·ªùi gian */
        font-weight: 400;
        color: var(--text-dark);
    }

    /* Container d·ª± b√°o th·ªùi ti·∫øt b√™n d∆∞·ªõi l·ªãch */
    .weather-container {
        background: linear-gradient(135deg, var(--calendar-gradient-start), var(--calendar-gradient-end)); /* N·ªÅn gradient */
        border-radius: var(--border-radius); /* Bo g√≥c */
        box-shadow: 0 8px 20px var(--calendar-shadow); /* B√≥ng */
        padding: 1.5rem;
        animation: fadeInRight 0.8s ease-out; /* Hi·ªáu ·ª©ng xu·∫•t hi·ªán */
        width: 100%;
    }

    /* Danh s√°ch d·ª± b√°o th·ªùi ti·∫øt */
    .weather-forecast {
        display: flex;
        flex-wrap: wrap; /* Cho ph√©p c√°c m·ª•c t·ª± ƒë·ªông xu·ªëng d√≤ng */
        gap: 0.8rem; /* Kho·∫£ng c√°ch gi·ªØa c√°c m·ª•c */
        justify-content: space-between; /* Ph√¢n b·ªë ƒë·ªÅu c√°c m·ª•c */
        max-height: none; /* X√≥a gi·ªõi h·∫°n chi·ªÅu cao */
        overflow-x: hidden; /* X√≥a cu·ªôn ngang */
    }

    /* M·ª•c d·ª± b√°o */
    .forecast-item {
        background: var(--box-bg); /* N·ªÅn m·ª•c d·ª± b√°o */
        padding: 0.8rem 1.2rem;
        border-radius: var(--border-radius); /* Bo g√≥c */
        box-shadow: 0 4px 15px var(--shadow-color); /* B√≥ng */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        flex: 1 1 calc(33.333% - 0.8rem); /* 3 m·ª•c m·ªói h√†ng tr√™n m√†n h√¨nh l·ªõn */
        min-width: 120px; /* Chi·ªÅu r·ªông t·ªëi thi·ªÉu */
        height: 220px; /* TƒÉng chi·ªÅu cao ƒë·ªÉ ch·ª©a th√™m kh·∫£ nƒÉng m∆∞a */
        text-align: center;
    }

    /* C·ªôt th·ªùi gian */
    .forecast-item .time {
        font-size: clamp(0.9rem, 1.8vw, 1rem); /* K√≠ch th∆∞·ªõc ch·ªØ th·ªùi gian */
        font-weight: 500;
        color: var(--text-dark);
        margin-bottom: 0.5rem; /* Kho·∫£ng c√°ch d∆∞·ªõi */
    }

    /* D·ªØ li·ªáu th·ªùi ti·∫øt */
    .forecast-item .weather-data {
        display: flex;
        flex-direction: column; /* Hi·ªÉn th·ªã theo c·ªôt */
        gap: 0.3rem; /* Kho·∫£ng c√°ch gi·ªØa c√°c d√≤ng */
        font-size: clamp(0.9rem, 1.8vw, 1rem); /* K√≠ch th∆∞·ªõc ch·ªØ */
        align-items: center;
        text-align: center;
    }

    .forecast-item .temperature { color: var(--temperature-color); }
    .forecast-item .humidity { color: var(--humidity-color); }
    .forecast-item .precipitation { color: var(--precipitation-color); }
    .forecast-item .precipitation-probability { color: var(--precipitation-probability-color); } /* M√†u kh·∫£ nƒÉng m∆∞a */
    .forecast-item .rain { color: var(--precipitation-color); }

    /* Keyframes cho hi·ªáu ·ª©ng */
    @keyframes fadeInDown {
        from { opacity: 0; transform: translateY(-1.5rem); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(1.5rem); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(1.5rem); }
        to { opacity: 1; transform: translateX(0); }
    }

    /* TƒÉng kh·∫£ nƒÉng ti·∫øp c·∫≠n */
    @media (prefers-reduced-motion: reduce) {
        .box, .title, .calendar-container, .weather-container, .menu-container {
            animation: none; /* T·∫Øt hi·ªáu ·ª©ng */
            transition: none; /* T·∫Øt chuy·ªÉn ƒë·ªïi */
        }
    }

    /* Thi·∫øt k·∫ø responsive */
    @media (max-width: 1024px) {
        .body-container {
            flex-direction: column; /* Chuy·ªÉn sang c·ªôt */
            align-items: center;
            margin-left: 0;
        }

        .box-container {
            width: 100%;
        }

        .right-side {
            width: 100%;
            max-width: 450px; /* TƒÉng chi·ªÅu r·ªông t·ªëi ƒëa cho tablet */
        }

        .menu-container {
            width: 100%;
            left: calc(-100%);
        }

        .menu-container:hover,
        .menu-trigger:hover ~ .menu-container {
            transform: translateX(100%); /* Hi·ªÉn th·ªã menu */
        }

        .menu-trigger {
            width: 15px; /* Gi·∫£m chi·ªÅu r·ªông n√∫t k√≠ch ho·∫°t */
        }
    }

    @media (max-width: 768px) {
        .title {
            font-size: clamp(1.5rem, 4vw, 1.9rem); /* Gi·∫£m k√≠ch th∆∞·ªõc ti√™u ƒë·ªÅ */
            padding: 1rem 1.5rem;
        }

        .top-row,
        .bottom-row {
            grid-template-columns: 1fr; /* 1 c·ªôt */
            gap: 1.5rem;
        }

        .box {
            max-width: 360px;
            margin: 0 auto;
        }

        .value {
            font-size: clamp(1.8rem, 3.5vw, 2.2rem); /* Gi·∫£m k√≠ch th∆∞·ªõc gi√° tr·ªã */
        }

        .forecast-item {
            flex: 1 1 calc(50% - 0.8rem); /* 2 m·ª•c m·ªói h√†ng tr√™n tablet */
            min-width: 100px;
            height: 200px; /* Gi·∫£m chi·ªÅu cao */
        }

        .forecast-item .weather-data {
            font-size: clamp(0.8rem, 1.5vw, 0.9rem); /* Gi·∫£m k√≠ch th∆∞·ªõc ch·ªØ */
        }

        .forecast-item .time {
            font-size: clamp(0.8rem, 1.8vw, 0.9rem); /* Gi·∫£m k√≠ch th∆∞·ªõc th·ªùi gian */
        }
    }

    @media (max-width: 480px) {
        .title {
            font-size: clamp(1.3rem, 3.5vw, 1.6rem); /* Gi·∫£m k√≠ch th∆∞·ªõc ti√™u ƒë·ªÅ */
        }

        body {
            padding: clamp(1rem, 3vw, 1.5rem); /* Gi·∫£m l·ªÅ */
        }

        .calendar-day {
            font-size: clamp(2rem, 4vw, 2.8rem); /* Gi·∫£m k√≠ch th∆∞·ªõc ng√†y */
        }

        .forecast-item {
            flex: 1 1 100%; /* 1 m·ª•c m·ªói h√†ng tr√™n ƒëi·ªán tho·∫°i */
            min-width: 100px;
            height: 180px; /* Gi·∫£m chi·ªÅu cao */
        }

        .forecast-item .weather-data {
            font-size: clamp(0.8rem, 1.5vw, 0.9rem); /* Gi·∫£m k√≠ch th∆∞·ªõc ch·ªØ */
        }

        .forecast-item .time {
            min-width: 4rem;
        }
    }
        </style>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
        <!-- Font Awesome for icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    </head>
    <body>
        <!-- Menu Trigger and Sidebar -->
        <div class="menu-trigger"></div>
        <div class="menu-container">
            <div class="menu">
                <a href="index.html" class="menu-item"><i class="fas fa-home"></i> Trang ch·ªß</a>
                <a href="dataanalist.html" class="menu-item"><i class="fas fa-chart-line"></i> Ph√¢n t√≠ch</a>
                <a href="giong.html" class="menu-item"><i class="fas fa-seedling"></i> ƒê·ªÅ xu·∫•t gi·ªëng</a>
                <a href="#" class="menu-item"><i class="fas fa-gamepad"></i> ƒêi·ªÅu khi·ªÉn</a>
                <a href="#" class="menu-item"><i class="fas fa-comment"></i> Chat Box</a>
                <a href="#" class="menu-item"><i class="fas fa-cog"></i> C√†i ƒë·∫∑t</a>
                <a href="#" class="menu-item"><i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t</a>
            </div>
        </div>

        <div class="title">H·ªá th·ªëng d·ª± ƒëo√°n s·∫£n l∆∞·ª£ng v√† gi·ªëng ph√π h·ª£p</div>
        <div class="body-container">
            <!-- Box Container (Left Side) with Background -->
            <div class="box-container">
                <div class="top-row">
                    <div class="box">
                        <h1>Nhi·ªát ƒë·ªô</h1>
                        <div class="data"><span class="value" id="temperature">--</span> ¬∞C</div>
                    </div>
                    <div class="box">
                        <h1>ƒê·ªô ·∫©m</h1>
                        <div class="data"><span class="value" id="humidity">--</span> %</div>
                    </div>
                </div>
                <div class="bottom-row">
                    <div class="box">
                        <h1>ƒê·ªô ·∫©m ƒë·∫•t</h1>
                        <div class="data"><span class="value" id="soil_moisture">--</span> %</div>
                    </div>
                    <div class="box">
                        <h1>N·ªìng ƒë·ªô NH3+</h1>
                        <div class="data"><span class="value" id="nh3">--</span> ppm</div>
                    </div>
                    <div class="box">
                        <h1>L∆∞·ª£ng m∆∞a</h1>
                        <div class="data"><span class="value" id="precipitation">--</span> mm</div>
                    </div>
                </div>
            </div>

            <!-- Right Side: Calendar and Weather Forecast -->
            <div class="right-side">
                <!-- Calendar Container -->
                <div class="calendar-container">
                    <div class="calendar">
                        <div class="calendar-month-year" id="calendar-month-year"></div>
                        <div class="calendar-day" id="calendar-day"></div>
                        <div class="calendar-weekday" id="calendar-weekday"></div>
                        <div class="calendar-time" id="calendar-time"></div>
                    </div>
                </div>

                <!-- Weather Forecast Container Below Calendar -->
                <div class="weather-container">
                    <div style="margin-bottom: 1rem;">
                        <label for="forecast-hours" style="color: var(--text-dark); font-weight: 500;">Ch·ªçn kho·∫£ng th·ªùi gian d·ª± b√°o: </label>
                        <select id="forecast-hours" onchange="updateForecastHours()">
                            <option value="3" selected>3 gi·ªù</option>
                            <option value="6">6 gi·ªù</option>
                            <option value="12">12 gi·ªù</option>
                            <option value="24">24 gi·ªù</option>
                            <option value="2days">2 ng√†y</option>
                            <option value="3days">3 ng√†y</option>
                            <option value="384">16 ng√†y</option>
                        </select>
                    </div>
                    <div class="weather-forecast" id="weather-forecast">
                        <!-- Forecast items will be added dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Firebase SDK -->
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

        <script>
            // Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyBNAFhMZtU3ubH5R6ZaYZ1rmt-4PLONfj4",
                authDomain: "myweb-34625.firebaseapp.com",
                databaseURL: "https://myweb-34625-default-rtdb.firebaseio.com",
                projectId: "myweb-34625",
                storageBucket: "myweb-34625.firebasestorage.app",
                messagingSenderId: "140146495176",
                appId: "1:140146495176:web:47027bcb3f5750a0b89ffd",
                measurementId: "G-7GNXDSY3F2"
            };

            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);

            // Reference to Firebase Realtime Database
            const database = firebase.database();
            const dataRef = database.ref('data');

            // Listen for Firebase real-time updates
            dataRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    console.log('Firebase data received:', data);
                    document.getElementById('temperature').textContent = data.temperature ? data.temperature.toFixed(1) : 'N/A';
                    document.getElementById('humidity').textContent = data.humidity ? data.humidity.toFixed(1) : 'N/A';
                    document.getElementById('soil_moisture').textContent = data.soil_moisture ? data.soil_moisture.toFixed(1) : 'N/A';
                    document.getElementById('nh3').textContent = data.nh3 ? data.nh3.toFixed(1) : 'N/A';
                } else {
                    console.warn('No data available in Firebase at /data');
                    document.getElementById('temperature').textContent = 'N/A';
                    document.getElementById('humidity').textContent = 'N/A';
                    document.getElementById('soil_moisture').textContent = 'N/A';
                    document.getElementById('nh3').textContent = 'N/A';
                }
            }, (error) => {
                console.error('Error fetching Firebase data:', error.message);
                document.getElementById('temperature').textContent = 'Error';
                document.getElementById('humidity').textContent = 'Error';
                document.getElementById('soil_moisture').textContent = 'Error';
                document.getElementById('nh3').textContent = 'Error';
            });

            // Fetch weather data from Open-Meteo API
            async function fetchWeatherData(option) {
                const coordinates = {
                    latitude: 10.3678, // Su·ªëi Ngh·ªá, Ch√¢u ƒê·ª©c, BRVT
                    longitude: 107.0989
                };
                const isLongTerm = option === '2days' || option === '3days' || option === '384';
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${coordinates.latitude}&longitude=${coordinates.longitude}&hourly=temperature_2m,relative_humidity_2m,precipitation,precipitation_probability&timezone=Asia/Ho_Chi_Minh${isLongTerm ? '&forecast_days=16' : ''}`;
                
                try {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`HTTP error ${response.status}`);
                    const data = await response.json();
                    if (data.hourly) {
                        // Update current precipitation
                        const latestPrecipitation = data.hourly.precipitation[0];
                        document.getElementById('precipitation').textContent = latestPrecipitation ? latestPrecipitation.toFixed(1) : '0.0';
                        console.log('Current precipitation:', latestPrecipitation);

                        // Send precipitation to Firebase
                        try {
                            const precipitationValue = typeof latestPrecipitation === 'number' && !isNaN(latestPrecipitation) ? latestPrecipitation : 0;
                            await database.ref('data/precipitation').set(precipitationValue);
                            console.log('Precipitation sent to Firebase as number:', precipitationValue);
                        } catch (error) {
                            console.error('Error sending precipitation to Firebase:', error.message);
                        }

                        // Update weather forecast based on selected option
                        const forecastContainer = document.getElementById('weather-forecast');
                        forecastContainer.innerHTML = ''; // Clear previous forecast

                        const hours = option === '2days' ? 48 : option === '3days' ? 72 : option === '384' ? 384 : parseInt(option);
                        const times = data.hourly.time;
                        const temperatures = data.hourly.temperature_2m;
                        const humidities = data.hourly.relative_humidity_2m;
                        const precipitations = data.hourly.precipitation;
                        const precipitationProbabilities = data.hourly.precipitation_probability;

                        // Get current time in Vietnam timezone
                        const now = new Date();
                        const currentTime = now.getTime();

                        if (hours <= 12) {
                            // Detailed hourly forecast for 3, 6, 12 hours
                            let count = 0;
                            for (let index = 0; index < times.length && count < hours; index++) {
                                const forecastTime = new Date(times[index]).getTime();
                                if (forecastTime > currentTime) {
                                    const date = new Date(times[index]);
                                    const hours = date.getHours();
                                    const period = hours >= 12 ? 'PM' : 'AM';
                                    const displayHour = hours % 12 || 12;

                                    let rainIcon = precipitations[index] > 10 ? 'üåßÔ∏è'
                                        : precipitations[index] > 2 ? 'üå¶Ô∏è'
                                        : precipitations[index] > 0 ? 'üíß'
                                        : temperatures[index] <= 25 ? 'üå´Ô∏è' : '‚òÅÔ∏è';

                                    const forecastItem = `
                                        <div class="forecast-item">
                                            <span class="time">${displayHour} ${period}</span>
                                            <div class="weather-data">
                                                <span class="temperature">${temperatures[index].toFixed(1)}¬∞C</span>
                                                <span class="humidity">${humidities[index]}%</span>
                                                <span class="precipitation">${precipitations[index].toFixed(1)}mm</span>
                                                <span class="precipitation-probability">${precipitationProbabilities[index]}%</span>
                                                <span class="rain">${rainIcon}</span>
                                            </div>
                                        </div>
                                    `;
                                    forecastContainer.innerHTML += forecastItem;
                                    count++;
                                }
                            }
                            if (count === 0) {
                                forecastContainer.innerHTML = '<div>Kh√¥ng c√≥ d·ª± b√°o cho khung gi·ªù n√†y</div>';
                            }
                        } else if (hours === 24) {
                            // Summary forecast for 24 hours
                            let futureTemps = [];
                            let futureHums = [];
                            let futurePrecs = [];
                            let futurePrecProbs = [];
                            for (let index = 0; index < times.length && futureTemps.length < 24; index++) {
                                const forecastTime = new Date(times[index]).getTime();
                                if (forecastTime > currentTime) {
                                    futureTemps.push(temperatures[index]);
                                    futureHums.push(humidities[index]);
                                    futurePrecs.push(precipitations[index]);
                                    futurePrecProbs.push(precipitationProbabilities[index]);
                                }
                            }

                            if (futureTemps.length === 0) {
                                forecastContainer.innerHTML = '<div>Kh√¥ng c√≥ d·ª± b√°o cho khung gi·ªù n√†y</div>';
                                return;
                            }

                            const minTemperature = Math.min(...futureTemps);
                            const maxTemperature = Math.max(...futureTemps);
                            const minHumidity = Math.min(...futureHums);
                            const maxHumidity = Math.max(...futureHums);
                            const totalPrecipitation = futurePrecs.reduce((sum, prec) => sum + prec, 0);
                            const maxPrecipitationProbability = Math.max(...futurePrecProbs);

                            let rainIcon = totalPrecipitation > 10 ? 'üåßÔ∏è'
                                : totalPrecipitation > 2 ? 'üå¶Ô∏è'
                                : totalPrecipitation > 0 ? 'üíß'
                                : minTemperature <= 25 ? 'üå´Ô∏è' : '‚òÅÔ∏è';

                            const forecastItem = `
                                <div class="forecast-item">
                                    <span class="time">24 gi·ªù t·ªõi</span>
                                    <div class="weather-data">
                                        <span class="temperature">${minTemperature.toFixed(1)} -- ${maxTemperature.toFixed(1)}¬∞C</span>
                                        <span class="humidity">${minHumidity} -- ${maxHumidity}%</span>
                                        <span class="precipitation">${totalPrecipitation.toFixed(1)}mm</span>
                                        <span class="precipitation-probability">${maxPrecipitationProbability}%</span>
                                        <span class="rain">${rainIcon}</span>
                                    </div>
                                </div>
                            `;
                            forecastContainer.innerHTML = forecastItem;
                        } else if (option === '2days' || option === '3days') {
                            // Daily forecast for 2 or 3 days
                            const numDays = option === '2days' ? 2 : 3;
                            let currentDay = null;
                            let dayTemps = [];
                            let dayHums = [];
                            let dayPrecs = [];
                            let dayPrecProbs = [];
                            let daysAdded = 0;

                            for (let index = 0; index < times.length && daysAdded < numDays; index++) {
                                const forecastTime = new Date(times[index]);
                                const forecastTimeMs = forecastTime.getTime();
                                if (forecastTimeMs <= currentTime) continue;

                                const forecastDay = forecastTime.toLocaleString('vi-VN', { day: 'numeric', month: 'numeric' });

                                if (currentDay !== forecastDay) {
                                    if (dayTemps.length > 0) {
                                        const minTemp = Math.min(...dayTemps);
                                        const maxTemp = Math.max(...dayTemps);
                                        const minHum = Math.min(...dayHums);
                                        const maxHum = Math.max(...dayHums);
                                        const totalPrec = dayPrecs.reduce((sum, prec) => sum + prec, 0);
                                        const maxPrecProb = Math.max(...dayPrecProbs);

                                        let rainIcon = totalPrec > 10 ? 'üåßÔ∏è'
                                            : totalPrec > 2 ? 'üå¶Ô∏è'
                                            : totalPrec > 0 ? 'üíß'
                                            : minTemp <= 25 ? 'üå´Ô∏è' : '‚òÅÔ∏è';

                                        const forecastItem = `
                                            <div class="forecast-item">
                                                <span class="time">${currentDay}</span>
                                                <div class="weather-data">
                                                    <span class="temperature">${minTemp.toFixed(1)} -- ${maxTemp.toFixed(1)}¬∞C</span>
                                                    <span class="humidity">${minHum} -- ${maxHum}%</span>
                                                    <span class="precipitation">${totalPrec.toFixed(1)}mm</span>
                                                    <span class="precipitation-probability">${maxPrecProb}%</span>
                                                    <span class="rain">${rainIcon}</span>
                                                </div>
                                            </div>
                                        `;
                                        forecastContainer.innerHTML += forecastItem;
                                        daysAdded++;
                                    }
                                    currentDay = forecastDay;
                                    dayTemps = [];
                                    dayHums = [];
                                    dayPrecs = [];
                                    dayPrecProbs = [];
                                }
                                dayTemps.push(temperatures[index]);
                                dayHums.push(humidities[index]);
                                dayPrecs.push(precipitations[index]);
                                dayPrecProbs.push(precipitationProbabilities[index]);
                            }

                            if (dayTemps.length > 0 && daysAdded < numDays) {
                                const minTemp = Math.min(...dayTemps);
                                const maxTemp = Math.max(...dayTemps);
                                const minHum = Math.min(...dayHums);
                                const maxHum = Math.max(...dayHums);
                                const totalPrec = dayPrecs.reduce((sum, prec) => sum + prec, 0);
                                const maxPrecProb = Math.max(...dayPrecProbs);

                                let rainIcon = totalPrec > 10 ? 'üåßÔ∏è'
                                    : totalPrec > 2 ? 'üå¶Ô∏è'
                                    : totalPrec > 0 ? 'üíß'
                                    : minTemp <= 25 ? 'üå´Ô∏è' : '‚òÅÔ∏è';

                                const forecastItem = `
                                    <div class="forecast-item">
                                        <span class="time">${currentDay}</span>
                                        <div class="weather-data">
                                            <span class="temperature">${minTemp.toFixed(1)} -- ${maxTemp.toFixed(1)}¬∞C</span>
                                            <span class="humidity">${minHum} -- ${maxHum}%</span>
                                            <span class="precipitation">${totalPrec.toFixed(1)}mm</span>
                                            <span class="precipitation-probability">${maxPrecProb}%</span>
                                            <span class="rain">${rainIcon}</span>
                                        </div>
                                    </div>
                                `;
                                forecastContainer.innerHTML += forecastItem;
                            }

                            if (forecastContainer.innerHTML === '') {
                                forecastContainer.innerHTML = '<div>Kh√¥ng c√≥ d·ª± b√°o cho khung gi·ªù n√†y</div>';
                            }
                        } else if (option === '384') {
                            // Summary daily forecast for 16 days
                            let currentDay = null;
                            let dayTemps = [];
                            let dayHums = [];
                            let dayPrecs = [];
                            let dayPrecProbs = [];
                            let daysAdded = 0;

                            for (let index = 0; index < times.length && daysAdded < 16; index++) {
                                const forecastTime = new Date(times[index]);
                                const forecastTimeMs = forecastTime.getTime();
                                if (forecastTimeMs <= currentTime) continue;

                                const forecastDay = forecastTime.toLocaleString('vi-VN', { day: 'numeric', month: 'numeric' });

                                if (currentDay !== forecastDay) {
                                    if (dayTemps.length > 0) {
                                        const minTemp = Math.min(...dayTemps);
                                        const maxTemp = Math.max(...dayTemps);
                                        const minHum = Math.min(...dayHums);
                                        const maxHum = Math.max(...dayHums);
                                        const totalPrec = dayPrecs.reduce((sum, prec) => sum + prec, 0);
                                        const maxPrecProb = Math.max(...dayPrecProbs);

                                        let rainIcon = totalPrec > 10 ? 'üåßÔ∏è'
                                            : totalPrec > 2 ? 'üå¶Ô∏è'
                                            : totalPrec > 0 ? 'üíß'
                                            : minTemp <= 25 ? 'üå´Ô∏è' : '‚òÅÔ∏è';

                                        const forecastItem = `
                                            <div class="forecast-item">
                                                <span class="time">${currentDay}</span>
                                                <div class="weather-data">
                                                    <span class="temperature">${minTemp.toFixed(1)} -- ${maxTemp.toFixed(1)}¬∞C</span>
                                                    <span class="humidity">${minHum} -- ${maxHum}%</span>
                                                    <span class="precipitation">${totalPrec.toFixed(1)}mm</span>
                                                    <span class="precipitation-probability">${maxPrecProb}%</span>
                                                    <span class="rain">${rainIcon}</span>
                                                </div>
                                            </div>
                                        `;
                                        forecastContainer.innerHTML += forecastItem;
                                        daysAdded++;
                                    }
                                    currentDay = forecastDay;
                                    dayTemps = [];
                                    dayHums = [];
                                    dayPrecs = [];
                                    dayPrecProbs = [];
                                }
                                dayTemps.push(temperatures[index]);
                                dayHums.push(humidities[index]);
                                dayPrecs.push(precipitations[index]);
                                dayPrecProbs.push(precipitationProbabilities[index]);
                            }

                            if (dayTemps.length > 0 && daysAdded < 16) {
                                const minTemp = Math.min(...dayTemps);
                                const maxTemp = Math.max(...dayTemps);
                                const minHum = Math.min(...dayHums);
                                const maxHum = Math.max(...dayHums);
                                const totalPrec = dayPrecs.reduce((sum, prec) => sum + prec, 0);
                                const maxPrecProb = Math.max(...dayPrecProbs);

                                let rainIcon = totalPrec > 10 ? 'üåßÔ∏è'
                                    : totalPrecipitation > 2 ? 'üå¶Ô∏è'
                                    : totalPrecipitation > 0 ? 'üíß'
                                    : minTemp <= 25 ? 'üå´Ô∏è' : '‚òÅÔ∏è';

                                const forecastItem = `
                                    <div class="forecast-item">
                                        <span class="time">${currentDay}</span>
                                        <div class="weather-data">
                                            <span class="temperature">${minTemp.toFixed(1)} -- ${maxTemp.toFixed(1)}¬∞C</span>
                                            <span class="humidity">${minHum} -- ${maxHum}%</span>
                                            <span class="precipitation">${totalPrec.toFixed(1)}mm</span>
                                            <span class="precipitation-probability">${maxPrecProb}%</span>
                                            <span class="rain">${rainIcon}</span>
                                        </div>
                                    </div>
                                `;
                                forecastContainer.innerHTML += forecastItem;
                            }

                            if (forecastContainer.innerHTML === '') {
                                forecastContainer.innerHTML = '<div>Kh√¥ng c√≥ d·ª± b√°o cho khung gi·ªù n√†y</div>';
                            }
                        }
                    } else {
                        console.warn('No weather data available from Open-Meteo');
                        document.getElementById('precipitation').textContent = 'N/A';
                        document.getElementById('weather-forecast').innerHTML = '<div>Kh√¥ng c√≥ d·ª± b√°o th·ªùi ti·∫øt</div>';
                    }
                } catch (error) {
                    console.error('Error fetching weather data:', error.message);
                    document.getElementById('precipitation').textContent = 'L·ªói';
                    document.getElementById('weather-forecast').innerHTML = '<div>L·ªói t·∫£i d·ª± b√°o</div>';
                }
            }

            // Function to update forecast based on selected option
            function updateForecastHours() {
                const option = document.getElementById('forecast-hours').value;
                fetchWeatherData(option);
            }

            // Initial fetch with default 3 hours
            fetchWeatherData('3');
            setInterval(() => fetchWeatherData(document.getElementById('forecast-hours').value), 10 * 60 * 1000);

            // Update Calendar with Current Date and Time
            function updateCalendar() {
                const now = new Date();
                const options = { timeZone: 'Asia/Ho_Chi_Minh' };

                const day = now.getDate();
                const monthYear = now.toLocaleString('vi-VN', { month: 'long', year: 'numeric', ...options });
                const weekday = now.toLocaleString('vi-VN', { weekday: 'long', ...options });
                const time = now.toLocaleString('vi-VN', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true, ...options });

                document.getElementById('calendar-day').textContent = day;
                document.getElementById('calendar-month-year').textContent = monthYear;
                document.getElementById('calendar-weekday').textContent = weekday;
                document.getElementById('calendar-time').textContent = time;
            }

            // Initial update and refresh every second
            updateCalendar();
            setInterval(updateCalendar, 1000);
        </script>
    </body>
    </html>